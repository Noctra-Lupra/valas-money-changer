const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/app-CeA5vgJp.js","assets/app-CGgWXIny.css"])))=>i.map(i=>d[i]);
import{r as u,j as e,d as Se,u as Te,H as ae,a as De,_ as ke}from"./app-CeA5vgJp.js";import{c as J,B as Y}from"./button-Co2pPxdw.js";import{C as Me,a as Ce,b as _e,d as Ie,c as Ee,e as Re}from"./card-DuXmaIcy.js";import{C as Ae,a as Le,b as ze,c as Pe,e as Ve,f as se}from"./command-CtRr3q7Y.js";import{D as Fe,b as Oe,c as Ke,d as Ye}from"./dialog-C2wQKNmA.js";import{I as H}from"./input-Biyra0XF.js";import{L as R}from"./label-DIoEikQu.js";import{P as Xe,a as Je,b as $e}from"./popover-Dv5uDSrI.js";import{S as Be,a as Ge,b as Ue,c as He,d as W,e as We}from"./select-Cl1-FRH6.js";import{I as qe}from"./InvoiceTemplate-K9YP5BAO.js";import{S as Qe}from"./separator-DhRn0XIH.js";import{u as Ze,a as et,f as tt,g as $,b as q,h as at,X as st,t as k}from"./index-7eHb1Vwc.js";import{c as le,R as nt,I as rt,A as ne}from"./AuthenticatedLayout-M3cp1-KL.js";import{u as ot}from"./index-D3ZO5ocX.js";import{c as lt}from"./createLucideIcon-BMJE709E.js";import{P as re}from"./printer-BBc_7k99.js";import"./search-Dgjm83mc.js";const it=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],ct=lt("save",it);function F({item:a,text:l,onMouseDown:o}){return a?e.jsx("div",{onMouseDown:o,style:{position:"absolute",left:a.x,top:a.y,fontSize:a.fontSize,fontWeight:a.bold?"bold":"normal",cursor:"grab",userSelect:"none",whiteSpace:"nowrap",zIndex:50},children:l}):e.jsx(e.Fragment,{children:l})}function dt(a){const{data:l,selectedCurrency:o,amount:x,customRate:i,total:j,formatIDR:m,formatNumber:y,items:w,onDrag:g}=a,c=u.useRef({x:0,y:0}),n=(t,N)=>{t.preventDefault(),c.current={x:t.clientX,y:t.clientY};const T=h=>{g?.(N,h.clientX-c.current.x,h.clientY-c.current.y),c.current={x:h.clientX,y:h.clientY}},f=()=>{window.removeEventListener("mousemove",T),window.removeEventListener("mouseup",f)};window.addEventListener("mousemove",T),window.addEventListener("mouseup",f)},r=t=>w?.find(N=>N.id===t);return e.jsx("div",{className:"relative w-full",children:e.jsx("div",{className:"w-full overflow-visible border-2 border-dashed border-gray-400 bg-white p-1 font-mono text-sm text-black shadow-sm",children:e.jsxs("div",{className:"flex min-w-[800px] border border-black",children:[e.jsxs("div",{className:"flex w-1/4 flex-col justify-between border-r border-black p-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"mb-1 font-bold",children:"Payment :"}),e.jsx("p",{className:"text-lg uppercase",children:l.payment_method})]}),e.jsxs("div",{className:"relative",children:[e.jsx("p",{className:"mb-1 font-bold",children:"Amount :"}),e.jsx("div",{className:"relative h-8",children:e.jsx(F,{item:r("amount_left"),text:m(j),onMouseDown:t=>n(t,"amount_left")})})]})]}),e.jsxs("div",{className:"mt-8 space-y-8",children:[e.jsxs("div",{children:[e.jsx("div",{className:"mb-1 h-0.5 w-24 bg-black"}),e.jsx("p",{className:"text-xs",children:"Authorized"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"mb-1 h-0.5 w-20 bg-black"}),e.jsx("p",{className:"text-xs",children:"Kasir"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"mb-1 h-0.5 w-20 bg-black"}),e.jsx("p",{className:"text-xs",children:"Nasabah"})]})]})]})]}),e.jsxs("div",{className:"w-3/4 p-0",children:[e.jsxs("div",{className:"flex items-center border-b border-black p-4",children:[e.jsx("div",{className:"mr-4 text-4xl font-black text-blue-800",children:"$"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold uppercase",children:"PT. MONEY CHANGER SEJAHTERA"}),e.jsx("p",{className:"text-xs",children:"Penukaran Valuta Asing"}),e.jsx("p",{className:"text-xs",children:"Jl. Jendral Sudirman No. 88, Jakarta Pusat"}),e.jsx("p",{className:"text-xs",children:"Telp: 021-555-9999"})]})]}),e.jsxs("div",{className:"flex border-b border-black bg-gray-100 text-center font-bold",children:[e.jsx("div",{className:"w-1/4 border-r border-black py-2",children:"Mata Uang"}),e.jsx("div",{className:"w-1/4 border-r border-black py-2",children:"Jumlah"}),e.jsx("div",{className:"w-1/4 border-r border-black py-2",children:"Kurs"}),e.jsx("div",{className:"w-1/4 py-2",children:"Jumlah Total"})]}),e.jsxs("div",{className:"flex h-32 text-center",children:[e.jsx("div",{className:"relative w-1/4 border-r border-black py-4 text-lg font-bold",children:e.jsx(F,{item:r("currency"),text:o?.code??"-",onMouseDown:t=>n(t,"currency")})}),e.jsx("div",{className:"relative w-1/4 border-r border-black py-4",children:e.jsx(F,{item:r("amount"),text:x?y(x):"-",onMouseDown:t=>n(t,"amount")})}),e.jsx("div",{className:"relative w-1/4 border-r border-black py-4",children:e.jsx(F,{item:r("rate"),text:i?m(Number(i)):"-",onMouseDown:t=>n(t,"rate")})}),e.jsx("div",{className:"relative w-1/4 py-4 font-bold",children:e.jsx(F,{item:r("total"),text:m(j),onMouseDown:t=>n(t,"total")})})]}),e.jsxs("div",{className:"relative flex border-t border-black",children:[e.jsxs("div",{className:"w-1/2 border-r border-black p-2",children:[e.jsx("p",{className:"text-xs font-bold",children:"JUAL KE / SOLD TO :"}),e.jsx("p",{className:"mt-1 font-medium uppercase",children:e.jsx(F,{item:r("customer"),text:l.customer_name||".........................",onMouseDown:t=>n(t,"customer")})})]}),e.jsxs("div",{className:"flex w-1/2",children:[e.jsxs("div",{className:"w-1/2 border-r border-black p-2",children:[e.jsx("p",{className:"text-xs font-bold",children:"NO :"}),e.jsxs("p",{className:"mt-1",children:["TRX-",new Date().getTime().toString().slice(-6)]})]}),e.jsxs("div",{className:"w-1/2 p-2",children:[e.jsx("p",{className:"text-xs font-bold",children:"DATE :"}),e.jsx("p",{className:"mt-1",children:new Date().toLocaleDateString("id-ID")})]})]})]})]})]})})})}function C({item:a,text:l,onMouseDown:o}){return a?e.jsx("div",{onMouseDown:o,style:{position:"absolute",left:a.x,top:a.y,fontSize:a.fontSize,fontWeight:a.bold?"bold":"normal",cursor:"grab",userSelect:"none",whiteSpace:"nowrap",zIndex:50},children:l}):e.jsx(e.Fragment,{children:l})}function mt(a){const{data:l,selectedCurrency:o,amount:x,customRate:i,total:j,formatIDR:m,formatNumber:y,items:w,onDrag:g}=a,c=u.useRef({x:0,y:0}),n=(t,N)=>{t.preventDefault(),c.current={x:t.clientX,y:t.clientY};const T=h=>{g?.(N,h.clientX-c.current.x,h.clientY-c.current.y),c.current={x:h.clientX,y:h.clientY}},f=()=>{window.removeEventListener("mousemove",T),window.removeEventListener("mouseup",f)};window.addEventListener("mousemove",T),window.addEventListener("mouseup",f)},r=t=>w?.find(N=>N.id===t);return e.jsx("div",{className:"relative w-full overflow-x-auto border-2 border-dashed border-gray-400 bg-white p-1 font-mono text-sm text-black shadow-sm",children:e.jsxs("div",{className:"relative w-full border border-black p-4 font-mono text-xs",children:[e.jsxs("div",{className:"relative text-center",children:[e.jsx("div",{className:"relative h-6 w-full",children:e.jsx(C,{item:r("title"),text:e.jsx("h1",{className:"font-bold uppercase",children:"PT. MONEY CHANGER"}),onMouseDown:t=>n(t,"title")})}),e.jsx("div",{className:"relative h-5 w-full",children:e.jsx(C,{item:r("address"),text:e.jsx("p",{className:"mb-2",children:"Jl. Sudirman No.88"}),onMouseDown:t=>n(t,"address")})})]}),e.jsx("div",{className:"my-2 border-t border-dashed"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex justify-between relative",children:[e.jsx("span",{children:"Tanggal:"}),e.jsx("div",{className:"relative h-4 w-full",children:e.jsx(C,{item:r("date"),text:new Date().toLocaleDateString("id-ID"),onMouseDown:t=>n(t,"date")})})]}),e.jsxs("div",{className:"flex justify-between relative",children:[e.jsx("span",{children:"Payment:"}),e.jsx("div",{className:"relative h-4 w-full",children:e.jsx(C,{item:r("payment"),text:l?.payment_method??"-",onMouseDown:t=>n(t,"payment")})})]})]}),e.jsx("div",{className:"my-2 border-t border-dashed"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex justify-between relative",children:[e.jsx("div",{className:"relative h-4 w-full",children:e.jsx(C,{item:r("currency"),text:o?.code??"-",onMouseDown:t=>n(t,"currency")})}),e.jsx("div",{className:"relative h-4 w-full",children:e.jsx(C,{item:r("amount"),text:x?y(x):"-",onMouseDown:t=>n(t,"amount")})})]}),e.jsxs("div",{className:"flex justify-between relative",children:[e.jsx("span",{children:"Kurs"}),e.jsx("div",{className:"relative h-4 w-full",children:e.jsx(C,{item:r("rate"),text:i?m(Number(i)):"-",onMouseDown:t=>n(t,"rate")})})]})]}),e.jsx("div",{className:"my-2 border-t border-dashed"}),e.jsxs("div",{className:"flex justify-between font-bold relative",children:[e.jsx("span",{children:"TOTAL"}),e.jsx("div",{className:"relative h-5 w-full",children:e.jsx(C,{item:r("total"),text:m(j),onMouseDown:t=>n(t,"total")})})]}),e.jsx("div",{className:"relative mt-4 text-center",children:e.jsx("div",{className:"relative h-5 w-full",children:e.jsx(C,{item:r("thanks"),text:"Terima Kasih ðŸ™",onMouseDown:t=>n(t,"thanks")})})})]})})}function I({item:a,text:l,onMouseDown:o}){return a?e.jsx("div",{onMouseDown:o,style:{position:"absolute",left:a.x,top:a.y,fontSize:a.fontSize,fontWeight:a.bold?"bold":"normal",cursor:"grab",userSelect:"none",whiteSpace:"nowrap",zIndex:50},children:l}):e.jsx(e.Fragment,{children:l})}function xt(a){const{data:l,selectedCurrency:o,amount:x,customRate:i,total:j,formatIDR:m,formatNumber:y,items:w,onDrag:g}=a,c=u.useRef({x:0,y:0}),n=(t,N)=>{t.preventDefault(),c.current={x:t.clientX,y:t.clientY};const T=h=>{g?.(N,h.clientX-c.current.x,h.clientY-c.current.y),c.current={x:h.clientX,y:h.clientY}},f=()=>{window.removeEventListener("mousemove",T),window.removeEventListener("mouseup",f)};window.addEventListener("mousemove",T),window.addEventListener("mouseup",f)},r=t=>w?.find(N=>N.id===t);return e.jsx("div",{className:"relative w-full overflow-x-auto border-2 border-dashed border-gray-400 bg-white p-1 font-mono text-sm text-black shadow-sm",children:e.jsxs("div",{className:"relative min-w-full border-2 border-black p-6 font-mono",children:[e.jsx("div",{className:"relative mb-4 flex justify-center",children:e.jsx("h1",{className:"text-center text-lg font-bold",children:"NOTA TRANSAKSI"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"relative",children:[e.jsx("p",{children:"Customer"}),e.jsx("div",{className:"relative h-6",children:e.jsx(I,{item:r("customer"),text:e.jsx("p",{className:"font-bold",children:l?.customer_name||"â€”"}),onMouseDown:t=>n(t,"customer")})})]}),e.jsxs("div",{className:"relative",children:[e.jsx("p",{children:"Currency"}),e.jsx("div",{className:"relative h-6",children:e.jsx(I,{item:r("currency"),text:e.jsx("p",{className:"font-bold",children:o?.code??"-"}),onMouseDown:t=>n(t,"currency")})})]}),e.jsxs("div",{className:"relative",children:[e.jsx("p",{children:"Payment"}),e.jsx("div",{className:"relative h-6",children:e.jsx(I,{item:r("payment"),text:e.jsx("p",{className:"font-bold",children:l?.payment_method??"-"}),onMouseDown:t=>n(t,"payment")})})]}),e.jsxs("div",{className:"relative",children:[e.jsx("p",{children:"Total"}),e.jsx("div",{className:"relative h-6",children:e.jsx(I,{item:r("total"),text:e.jsx("p",{className:"font-bold",children:m(j)}),onMouseDown:t=>n(t,"total")})})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"relative",children:[e.jsx("p",{children:"Amount"}),e.jsx("div",{className:"relative h-6",children:e.jsx(I,{item:r("amount"),text:e.jsx("p",{className:"font-bold",children:x?y(x):"-"}),onMouseDown:t=>n(t,"amount")})})]}),e.jsxs("div",{className:"relative",children:[e.jsx("p",{children:"Rate"}),e.jsx("div",{className:"relative h-6",children:e.jsx(I,{item:r("rate"),text:e.jsx("p",{className:"font-bold",children:i?m(Number(i)):"-"}),onMouseDown:t=>n(t,"rate")})})]})]}),e.jsxs("div",{className:"mt-10 flex justify-between",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"mb-1 h-0.5 w-32 bg-black"}),e.jsx("div",{className:"relative h-5",children:e.jsx(I,{item:r("sign_kasir"),text:"Kasir",onMouseDown:t=>n(t,"sign_kasir")})})]}),e.jsxs("div",{className:"relative text-right",children:[e.jsx("div",{className:"mb-1 h-0.5 w-32 bg-black"}),e.jsx("div",{className:"relative h-5",children:e.jsx(I,{item:r("sign_nasabah"),text:"Nasabah",onMouseDown:t=>n(t,"sign_nasabah")})})]})]})]})})}function M({item:a,text:l,onMouseDown:o}){return a?e.jsx("div",{onMouseDown:o,style:{position:"absolute",left:a.x,top:a.y,fontSize:a.fontSize,fontWeight:a.bold?"bold":"normal",cursor:"grab",userSelect:"none",whiteSpace:"nowrap",zIndex:50},children:l}):e.jsx(e.Fragment,{children:l})}function ut(a){const{data:l,selectedCurrency:o,amount:x,customRate:i,total:j,formatIDR:m,formatNumber:y,items:w,onDrag:g}=a,c=u.useRef({x:0,y:0}),n=(t,N)=>{t.preventDefault(),c.current={x:t.clientX,y:t.clientY};const T=h=>{g?.(N,h.clientX-c.current.x,h.clientY-c.current.y),c.current={x:h.clientX,y:h.clientY}},f=()=>{window.removeEventListener("mousemove",T),window.removeEventListener("mouseup",f)};window.addEventListener("mousemove",T),window.addEventListener("mouseup",f)},r=t=>w?.find(N=>N.id===t);return e.jsx("div",{className:"relative w-full overflow-x-auto border-2 border-dashed border-gray-400 bg-white p-1 font-mono text-sm text-black shadow-sm",children:e.jsxs("div",{className:"relative min-w-full border border-gray-800 p-6 font-sans",children:[e.jsxs("div",{className:"mb-4 flex justify-between",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"relative h-7",children:e.jsx(M,{item:r("company_name"),text:e.jsx("h1",{className:"text-xl font-bold",children:"Money Changer"}),onMouseDown:t=>n(t,"company_name")})}),e.jsx("div",{className:"relative h-4",children:e.jsx(M,{item:r("company_city"),text:e.jsx("p",{className:"text-xs",children:"Jakarta"}),onMouseDown:t=>n(t,"company_city")})})]}),e.jsxs("div",{className:"relative text-right text-sm",children:[e.jsx("div",{className:"relative h-5",children:e.jsx(M,{item:r("trx_number"),text:`#${Date.now().toString().slice(-6)}`,onMouseDown:t=>n(t,"trx_number")})}),e.jsx("div",{className:"relative h-5",children:e.jsx(M,{item:r("date"),text:new Date().toLocaleDateString("id-ID"),onMouseDown:t=>n(t,"date")})})]})]}),e.jsxs("table",{className:"w-full border text-sm",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border p-2",children:"Valas"}),e.jsx("th",{className:"border p-2",children:"Jumlah"}),e.jsx("th",{className:"border p-2",children:"Kurs"}),e.jsx("th",{className:"border p-2",children:"Total"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{className:"text-center",children:[e.jsx("td",{className:"relative border p-2",children:e.jsx("div",{className:"relative flex h-5 items-center justify-center",children:e.jsx(M,{item:r("currency"),text:o?.code??"-",onMouseDown:t=>n(t,"currency")})})}),e.jsx("td",{className:"relative border p-2",children:e.jsx("div",{className:"relative flex h-5 items-center justify-center",children:e.jsx(M,{item:r("amount"),text:x?y(x):"-",onMouseDown:t=>n(t,"amount")})})}),e.jsx("td",{className:"relative border p-2",children:e.jsx("div",{className:"relative flex h-5 items-center justify-center",children:e.jsx(M,{item:r("rate"),text:i?m(Number(i)):"-",onMouseDown:t=>n(t,"rate")})})}),e.jsx("td",{className:"relative border p-2 font-bold",children:e.jsx("div",{className:"relative flex h-5 items-center justify-center",children:e.jsx(M,{item:r("total"),text:m(j),onMouseDown:t=>n(t,"total")})})})]})})]}),e.jsxs("div",{className:"mt-4 space-y-2 text-sm",children:[e.jsxs("div",{className:"relative flex items-start gap-2",children:[e.jsx("span",{className:"w-[80px]",children:"Customer:"}),e.jsx("div",{className:"relative min-h-[24px] flex-1",children:e.jsx(M,{item:r("customer"),text:e.jsx("b",{children:l?.customer_name||"-"}),onMouseDown:t=>n(t,"customer")})})]}),e.jsxs("div",{className:"relative flex items-start gap-2",children:[e.jsx("span",{className:"w-[80px]",children:"Payment:"}),e.jsx("div",{className:"relative min-h-[24px] flex-1",children:e.jsx(M,{item:r("payment"),text:e.jsx("b",{children:l?.payment_method??"-"}),onMouseDown:t=>n(t,"payment")})})]})]})]})})}var B="Tabs",[ht]=et(B,[le]),ie=le(),[pt,Z]=ht(B),ce=u.forwardRef((a,l)=>{const{__scopeTabs:o,value:x,onValueChange:i,defaultValue:j,orientation:m="horizontal",dir:y,activationMode:w="automatic",...g}=a,c=ot(y),[n,r]=Ze({prop:x,onChange:i,defaultProp:j??"",caller:B});return e.jsx(pt,{scope:o,baseId:tt(),value:n,onValueChange:r,orientation:m,dir:c,activationMode:w,children:e.jsx($.div,{dir:c,"data-orientation":m,...g,ref:l})})});ce.displayName=B;var de="TabsList",me=u.forwardRef((a,l)=>{const{__scopeTabs:o,loop:x=!0,...i}=a,j=Z(de,o),m=ie(o);return e.jsx(nt,{asChild:!0,...m,orientation:j.orientation,dir:j.dir,loop:x,children:e.jsx($.div,{role:"tablist","aria-orientation":j.orientation,...i,ref:l})})});me.displayName=de;var xe="TabsTrigger",ue=u.forwardRef((a,l)=>{const{__scopeTabs:o,value:x,disabled:i=!1,...j}=a,m=Z(xe,o),y=ie(o),w=fe(m.baseId,x),g=ve(m.baseId,x),c=x===m.value;return e.jsx(rt,{asChild:!0,...y,focusable:!i,active:c,children:e.jsx($.button,{type:"button",role:"tab","aria-selected":c,"aria-controls":g,"data-state":c?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:w,...j,ref:l,onMouseDown:q(a.onMouseDown,n=>{!i&&n.button===0&&n.ctrlKey===!1?m.onValueChange(x):n.preventDefault()}),onKeyDown:q(a.onKeyDown,n=>{[" ","Enter"].includes(n.key)&&m.onValueChange(x)}),onFocus:q(a.onFocus,()=>{const n=m.activationMode!=="manual";!c&&!i&&n&&m.onValueChange(x)})})})});ue.displayName=xe;var he="TabsContent",pe=u.forwardRef((a,l)=>{const{__scopeTabs:o,value:x,forceMount:i,children:j,...m}=a,y=Z(he,o),w=fe(y.baseId,x),g=ve(y.baseId,x),c=x===y.value,n=u.useRef(c);return u.useEffect(()=>{const r=requestAnimationFrame(()=>n.current=!1);return()=>cancelAnimationFrame(r)},[]),e.jsx(at,{present:i||c,children:({present:r})=>e.jsx($.div,{"data-state":c?"active":"inactive","data-orientation":y.orientation,role:"tabpanel","aria-labelledby":w,hidden:!r,id:g,tabIndex:0,...m,ref:l,style:{...a.style,animationDuration:n.current?"0s":void 0},children:r&&j})})});pe.displayName=he;function fe(a,l){return`${a}-trigger-${l}`}function ve(a,l){return`${a}-content-${l}`}var ft=ce,je=me,be=ue,ye=pe;const oe=ft,Q=u.forwardRef(({className:a,...l},o)=>e.jsx(je,{ref:o,className:J("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",a),...l}));Q.displayName=je.displayName;const A=u.forwardRef(({className:a,...l},o)=>e.jsx(be,{ref:o,className:J("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",a),...l}));A.displayName=be.displayName;const vt=u.forwardRef(({className:a,...l},o)=>e.jsx(ye,{ref:o,className:J("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...l}));vt.displayName=ye.displayName;const jt={1:[{id:"title",type:"text",content:"NOTA TRANSAKSI",x:0,y:0,fontSize:18,bold:!0},{id:"customer",type:"text",content:"Nama: {{customer}}",x:0,y:0,fontSize:12},{id:"currency",type:"text",content:"Valuta: {{currency}}",x:0,y:0,fontSize:12},{id:"amount",type:"text",content:"Jumlah: {{amount}}",x:0,y:0,fontSize:12},{id:"rate",type:"text",content:"Rate: {{rate}}",x:0,y:0,fontSize:12},{id:"total",type:"text",content:"Total: {{total}}",x:0,y:0,fontSize:14,bold:!0},{id:"amount_left",type:"text",content:"Total: {{total}}",x:0,y:0,fontSize:14,bold:!0}],2:[{id:"title",type:"text",content:"NOTA TRANSAKSI",x:0,y:0,fontSize:18,bold:!0},{id:"customer",type:"text",content:"Nama: {{customer}}",x:0,y:0,fontSize:12},{id:"currency",type:"text",content:"Valuta: {{currency}}",x:0,y:0,fontSize:12},{id:"amount",type:"text",content:"Jumlah: {{amount}}",x:0,y:0,fontSize:12},{id:"rate",type:"text",content:"Rate: {{rate}}",x:0,y:0,fontSize:12},{id:"total",type:"text",content:"Total: {{total}}",x:0,y:0,fontSize:14,bold:!0},{id:"amount_left",type:"text",content:"Total: {{total}}",x:0,y:0,fontSize:14,bold:!0}],3:[{id:"title",type:"text",content:"BUKTI TRANSAKSI",x:95,y:20,fontSize:17,bold:!0},{id:"customer",type:"text",content:"Nasabah: {{customer}}",x:20,y:75,fontSize:12},{id:"currency",type:"text",content:"Mata Uang: {{currency}}",x:20,y:100,fontSize:12},{id:"amount",type:"text",content:"Jumlah: {{amount}}",x:20,y:125,fontSize:12},{id:"rate",type:"text",content:"Kurs: {{rate}}",x:20,y:150,fontSize:12},{id:"total",type:"text",content:"Total Bayar: {{total}}",x:20,y:190,fontSize:14,bold:!0}],4:[{id:"title",type:"text",content:"NOTA PEMBAYARAN",x:90,y:20,fontSize:17,bold:!0},{id:"customer",type:"text",content:"Nama Pelanggan: {{customer}}",x:20,y:75,fontSize:12},{id:"currency",type:"text",content:"Valas: {{currency}}",x:20,y:100,fontSize:12},{id:"amount",type:"text",content:"Nominal: {{amount}}",x:20,y:125,fontSize:12},{id:"rate",type:"text",content:"Rate IDR: {{rate}}",x:20,y:150,fontSize:12},{id:"total",type:"text",content:"TOTAL IDR: {{total}}",x:20,y:195,fontSize:15,bold:!0}]};function zt({currencies:a}){const{invoiceTemplate:l}=Se().props,[o,x]=u.useState(a[0]??null),[i,j]=u.useState(1),[m,y]=u.useState(jt),[w,g]=u.useState(!1),[c,n]=u.useState("buy"),[r,t]=u.useState(""),[N,T]=u.useState(a),[f,h]=u.useState(""),[_,X]=u.useState(""),[L,G]=u.useState(0),[z,O]=u.useState([]),[U,ee]=u.useState(!1);u.useEffect(()=>{U&&O(m[i].map(s=>({...s})))},[U,i,m]);const{data:S,setData:P,reset:te}=Te({customer_name:"",currency_id:a[0]?.id,type:"buy",amount:"",rate:"",total_idr:"",payment_method:"cash",template_id:1});u.useEffect(()=>{P("template_id",i)},[i]),u.useEffect(()=>{X("")},[o,c]),u.useEffect(()=>{if(!o)return;const s=d=>{if(!d)return 0;const D=String(d).replace(/\./g,"").replace(",",".");return Number(D)||0},v=s(f),b=s(_),p=v*b;G(p),P(d=>({...d,amount:String(v),rate:String(b),total_idr:String(p),type:c,currency_id:o.id}))},[f,_,c,o]);const K=s=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",maximumFractionDigits:0}).format(s),V=s=>{if(!s&&s!==0)return"";const v=String(s),b=v.split(","),p=b[0].replace(/[^0-9]/g,""),d=new Intl.NumberFormat("id-ID").format(Number(p)||0);if(b.length>1){const D=b[1].replace(/[^0-9]/g,"");return`${d},${D}`}return v.endsWith(",")?`${d},`:d},Ne=()=>{te(),h(""),X(""),G(0)},ge=s=>{s.preventDefault();const v={...S,template_id:i,amount:Number(S.amount),rate:Number(S.rate),total_idr:Number(S.total_idr)};ke(async()=>{const{router:b}=await import("./app-CeA5vgJp.js").then(p=>p.i);return{router:b}},__vite__mapDeps([0,1])).then(({router:b})=>{b.post("/transaksi",v,{onSuccess:()=>{k.success("Transaksi Berhasil!"),te(),h(""),X(""),G(0)},onError:p=>{console.log("Errors:",p),p.total_idr?k.error("Transaksi Gagal",{description:p.total_idr}):p.amount?k.error("Transaksi Gagal",{description:p.amount}):p.payment_method?k.error("Transaksi Gagal",{description:p.payment_method}):k.error("Terjadi Kesalahan",{description:"Silakan cek kembali inputan anda."})}})})},we=async()=>{try{const s=await fetch("/currencies/quick",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify({code:r.trim().toUpperCase()})}),v=await s.json();if(!s.ok)throw new Error(v.message||"Gagal");T(b=>[...b,v]),x(v),P("currency_id",v.id),t(""),g(!1),k.success(`Mata uang ${v.code} ditambahkan`)}catch(s){k.error("Gagal menambahkan mata uang",{description:s.message})}};return o?e.jsxs(ne,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200",children:"Kasir Transaksi"}),children:[e.jsx(ae,{title:"Transaksi Baru"}),e.jsxs("div",{className:"mx-auto flex w-full max-w-5xl flex-col gap-8",children:[e.jsx("form",{onSubmit:ge,children:e.jsxs(Me,{className:"border-t-4 border-t-blue-600 shadow-md",children:[e.jsxs(Ce,{children:[e.jsx(_e,{children:"Input Data Transaksi"}),e.jsx(Ie,{children:"Masukkan detail transaksi valuta asing."})]}),e.jsxs(Ee,{className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-12",children:[e.jsxs("div",{className:"md:col-span-4",children:[e.jsx(R,{className:"mb-2 block",children:"Jenis Transaksi"}),e.jsx(oe,{defaultValue:"buy",value:c,onValueChange:s=>{n(s),P("type",s)},className:"w-full",children:e.jsxs(Q,{className:"grid h-11 w-full grid-cols-2",children:[e.jsx(A,{value:"buy",className:"data-[state=active]:bg-green-600 data-[state=active]:text-white",children:"BELI"}),e.jsx(A,{value:"sell",className:"data-[state=active]:bg-orange-600 data-[state=active]:text-white",children:"JUAL"})]})})]}),e.jsxs("div",{className:"space-y-2 md:col-span-5",children:[e.jsx(R,{htmlFor:"customer",children:"Nama Nasabah"}),e.jsx(H,{id:"customer",placeholder:"Nama Lengkap...",value:S.customer_name,onChange:s=>P("customer_name",s.target.value),className:"h-11"})]}),e.jsxs("div",{className:"space-y-2 md:col-span-3",children:[e.jsx(R,{children:"Pembayaran"}),e.jsxs(Be,{onValueChange:s=>P("payment_method",s),defaultValue:S.payment_method,children:[e.jsx(Ge,{className:"h-11",children:e.jsx(Ue,{placeholder:"Metode"})}),e.jsxs(He,{children:[e.jsx(W,{value:"cash",children:"ðŸ’µ CASH"}),e.jsx(W,{value:"bca",children:"ðŸ¦ BCA"}),e.jsx(W,{value:"mandiri",children:"ðŸ¦ MANDIRI"})]})]})]})]}),e.jsx(Qe,{className:"my-2"}),e.jsxs("div",{className:"grid grid-cols-1 items-end gap-4 rounded-xl border border-gray-100 bg-gray-50 p-6 dark:border-zinc-800 dark:bg-zinc-900 md:grid-cols-12",children:[e.jsxs("div",{className:"space-y-2 md:col-span-3",children:[e.jsx(R,{className:"text-muted-foreground",children:"Mata Uang"}),e.jsxs(Xe,{open:w,onOpenChange:g,children:[e.jsx(Je,{asChild:!0,children:e.jsxs(Y,{variant:"outline",role:"combobox","aria-expanded":w,className:"h-14 w-full justify-between text-xl font-bold",children:[o.code.toUpperCase(),e.jsx(Ae,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsx($e,{className:"w-[200px] p-0",side:"bottom",align:"start",avoidCollisions:!1,children:e.jsxs(Le,{shouldFilter:!1,children:[e.jsx(ze,{placeholder:"Cari valas...",className:"h-9",value:r,onValueChange:t}),e.jsx(Pe,{children:e.jsxs(Ve,{children:[N.filter(s=>s.code.toLowerCase().includes(r.toLowerCase())).map(s=>e.jsxs(se,{value:s.code,className:"uppercase",onSelect:()=>{x(s),g(!1),t("")},children:[e.jsx(We,{className:J("mr-2 h-4 w-4",o.id===s.id?"opacity-100":"opacity-0")}),s.code]},s.id)),r&&!N.some(s=>s.code.toLowerCase()===r.toLowerCase())&&e.jsxs(se,{className:"font-semibold text-blue-600",onSelect:we,children:['Simpan mata uang "',r.toUpperCase(),'"']})]})})]})})]})]}),e.jsxs("div",{className:"flex items-end gap-3 md:col-span-9",children:[e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs(R,{className:"text-muted-foreground",children:["Jumlah (",o.code.toUpperCase(),")"]}),e.jsx(H,{type:"text",placeholder:"0",className:"h-14 text-center text-2xl font-bold",value:V(f),onChange:s=>h(s.target.value.replace(/\./g,""))})]}),e.jsx("div",{className:"flex h-14 items-center justify-center px-1",children:e.jsx("div",{className:"rounded-full bg-gray-200 p-1.5 dark:bg-gray-700",children:e.jsx(st,{className:"h-5 w-5 text-gray-500 dark:text-gray-300"})})}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(R,{className:"text-muted-foreground",children:"Rate / Kurs (IDR)"}),e.jsx(H,{type:"text",className:"h-14 border-blue-200 text-center text-2xl font-bold focus:border-blue-500",value:V(_),onChange:s=>X(s.target.value.replace(/\./g,"")),placeholder:"0"})]})]})]}),e.jsxs("div",{className:"mt-6 text-center",children:[e.jsx("p",{className:"mb-2 text-sm font-medium uppercase tracking-widest text-muted-foreground",children:"Total Estimasi (IDR)"}),e.jsxs("div",{className:"break-all text-6xl font-black tracking-tight text-green-600 dark:text-green-400 md:text-7xl",children:[K(L).replace("Rp",""),e.jsx("span",{className:"ml-2 text-2xl font-bold text-muted-foreground",children:"IDR"})]})]})]}),e.jsxs(Re,{className:"flex justify-between border-t bg-gray-50/50 p-6 dark:bg-zinc-900/50",children:[e.jsx(Y,{type:"button",variant:"ghost",size:"lg",onClick:Ne,className:"text-muted-foreground",children:"Reset Form"}),e.jsxs(Y,{type:"submit",size:"lg",className:"w-48 text-lg font-semibold shadow-lg shadow-blue-500/20",disabled:!f||!S.customer_name,children:[e.jsx(ct,{className:"mr-2 h-5 w-5"}),"SIMPAN"]})]})]})}),e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(R,{className:"mb-2 block",children:"Pilih Template Nota"}),e.jsx(oe,{value:String(i),onValueChange:s=>j(Number(s)),children:e.jsxs(Q,{children:[e.jsx(A,{value:"1",children:"Template 1"}),e.jsx(A,{value:"2",children:"Template 2"}),e.jsx(A,{value:"3",children:"Template 3"}),e.jsx(A,{value:"4",children:"Template 4"})]})})]}),e.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[e.jsx(re,{className:"h-5 w-5 text-gray-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300",children:"Preview Nota Fisik"})]}),e.jsx(qe,{transaction:{id:0,invoice_number:"-",template_id:i,currency:o,amount:Number(String(f).replace(/\./g,"").replace(",","."))||0,rate:Number(String(_).replace(/\./g,"").replace(",","."))||0,total_idr:L,customer_name:S.customer_name||"-",payment_method:S.payment_method||"cash",created_at:new Date().toISOString(),type:c,user:{name:"-"},financial_account:{type:S.payment_method||"cash"}},templateId:i,items:m[i],invoiceTemplate:l}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsxs(Y,{variant:"secondary",className:"w-48",disabled:!0,children:[e.jsx(re,{className:"mr-2 h-4 w-4"}),"Cetak Nota"]})})]})]}),e.jsx(Fe,{open:U,onOpenChange:ee,children:e.jsxs(Oe,{className:"max-w-4xl",children:[e.jsx(Ke,{children:e.jsx(Ye,{children:"Edit Template Nota"})}),e.jsxs("div",{className:"relative h-[500px] w-full overflow-visible border bg-white",children:[i===1&&e.jsx(dt,{data:S,selectedCurrency:o,amount:f,customRate:_,total:L,formatIDR:K,formatNumber:V,items:z,onDrag:(s,v,b)=>{O(p=>p.map(d=>{if(d.id!==s)return d;const D=d.x+v,E=d.y+b;return{...d,x:Math.max(0,Math.min(D,900)),y:Math.max(0,Math.min(E,450))}}))}}),i===2&&e.jsx(mt,{data:S,selectedCurrency:o,amount:f,customRate:_,total:L,formatIDR:K,formatNumber:V,items:z,onDrag:(s,v,b)=>{O(p=>p.map(d=>{if(d.id!==s)return d;const D=d.x+v,E=d.y+b;return{...d,x:Math.max(0,Math.min(D,900)),y:Math.max(0,Math.min(E,450))}}))}}),i===3&&e.jsx(ut,{data:S,selectedCurrency:o,amount:f,customRate:_,total:L,formatIDR:K,formatNumber:V,items:z,onDrag:(s,v,b)=>{O(p=>p.map(d=>{if(d.id!==s)return d;const D=d.x+v,E=d.y+b;return{...d,x:Math.max(0,Math.min(D,900)),y:Math.max(0,Math.min(E,450))}}))}}),i===4&&e.jsx(xt,{data:S,selectedCurrency:o,amount:f,customRate:_,total:L,formatIDR:K,formatNumber:V,items:z,onDrag:(s,v,b)=>{O(p=>p.map(d=>{if(d.id!==s)return d;const D=d.x+v,E=d.y+b;return{...d,x:Math.max(0,Math.min(D,900)),y:Math.max(0,Math.min(E,450))}}))}})]}),e.jsx("div",{className:"mt-4 flex justify-end gap-2",children:e.jsx(Y,{onClick:()=>{De.post("/nota-layout/save",{template_id:i,layout:z},{preserveScroll:!0,onStart:()=>{k.loading("Menyimpan layout...",{id:"save-layout"})},onSuccess:()=>{k.success("Layout berhasil disimpan!",{id:"save-layout"}),y(s=>({...s,[i]:z})),ee(!1)},onError:s=>{console.log("SAVE LAYOUT ERROR:",s),k.error("Gagal simpan layout",{id:"save-layout",description:s?.template_id||s?.layout||"Cek console untuk detail error"})},onFinish:()=>{k.dismiss("save-layout")}})},children:"Simpan Layout"})})]})})]}):e.jsxs(ne,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200",children:"Kasir Transaksi"}),children:[e.jsx(ae,{title:"Transaksi Baru"}),e.jsx("div",{className:"p-6 text-center text-muted-foreground",children:"Tidak ada data mata uang."})]})}export{zt as default};

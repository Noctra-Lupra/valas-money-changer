import{r as n,u as G,j as e,H as Y,a as Q}from"./app-CeA5vgJp.js";import{A as W,P as X}from"./AuthenticatedLayout-M3cp1-KL.js";import{C as u,a as g,b as p,c as j}from"./card-DuXmaIcy.js";import{I as f}from"./input-Biyra0XF.js";import{L as S}from"./label-DIoEikQu.js";import{T as Z,a as $,b,c as r,d as ee,e as t}from"./table-CChQfL5t.js";import{D as C,b as T,c as I,d as L,e as V,f as _}from"./dialog-C2wQKNmA.js";import{B as l}from"./button-Co2pPxdw.js";import{t as m}from"./index-7eHb1Vwc.js";import{T as ae}from"./trending-up-8Nhd7ivg.js";import{S as se}from"./search-Dgjm83mc.js";import{P as te}from"./plus-CgOyGvue.js";import{T as re}from"./trash-2-BSxALMEk.js";import{c as le}from"./createLucideIcon-BMJE709E.js";import"./index-D3ZO5ocX.js";const ne=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],oe=le("circle-alert",ne);function ye({stocks:N}){const[o,A]=n.useState(""),[H,c]=n.useState(!1),[k,v]=n.useState(null),[F,i]=n.useState(!1),O=a=>{v(a),i(!0)},B=()=>{k&&Q.delete(route("stok-valas.destroy",k),{onSuccess:()=>{i(!1),v(null),m.success("Valas berhasil dihapus.")},onError:()=>{m.error("Gagal menghapus valas.")}})},d=n.useMemo(()=>N.filter(a=>a.code.toLowerCase().includes(o.toLowerCase())||a.name.toLowerCase().includes(o.toLowerCase())),[o,N]),E=d.reduce((a,s)=>a+Number(s.stock_amount)*Number(s.average_rate),0),R=d.reduce((a,s)=>a+Number(s.stock_amount),0),w=a=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",maximumFractionDigits:0}).format(a),x=a=>new Intl.NumberFormat("id-ID").format(a),U=a=>{const s=new Date(a),h=new Date,q=s.toDateString()===h.toDateString(),J=new Date(h.setDate(h.getDate()-1)).toDateString()===s.toDateString();return q?s.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"}):J?"Kemarin":s.toLocaleDateString("id-ID",{day:"numeric",month:"short"})},{data:y,setData:D,post:M,processing:P,reset:K,errors:ce}=G({code:"",name:""}),z=a=>{a.preventDefault(),M(route("stok-valas.store"),{onSuccess:()=>{c(!1),K(),m.success("Valas baru berhasil ditambahkan.")},onError:()=>{m.error("Valas baru gagal ditambahkan.")}})};return e.jsxs(W,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200",children:"Stok Valas (Inventory)"}),children:[e.jsx(Y,{title:"Stok Valas"}),e.jsxs("div",{className:"flex flex-col gap-6 w-full mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(u,{className:"bg-blue-50 dark:bg-blue-950/30 border-blue-200 dark:border-blue-800",children:[e.jsxs(g,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(p,{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:"Total Valuasi Aset"}),e.jsx(ae,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(j,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:w(E)}),e.jsx("p",{className:"text-xs text-blue-600/70 dark:text-blue-400",children:"Estimasi nilai stok dalam Rupiah"})]})]}),e.jsxs(u,{children:[e.jsxs(g,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(p,{className:"text-sm font-medium text-muted-foreground",children:"Total Lembar Fisik"}),e.jsx(X,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(j,{children:[e.jsx("div",{className:"text-2xl font-bold",children:x(R)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Lembar valas di brankas"})]})]})]}),e.jsxs(u,{className:"shadow-md",children:[e.jsxs(g,{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx(p,{children:"Data Stok Per Varian"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Stok bertambah saat BELI dan berkurang saat JUAL."})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-3 w-full md:w-auto",children:[e.jsxs("div",{className:"relative w-full md:w-64",children:[e.jsx(se,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(f,{placeholder:"Cari Kode...",className:"pl-9",value:o,onChange:a=>A(a.target.value)})]}),e.jsxs(l,{className:"bg-white/90 hover:bg-white/80",onClick:()=>c(!0),children:[e.jsx(te,{className:"w-4 h-4 mr-2"}),"Add Valas"]}),e.jsx(C,{open:H,onOpenChange:c,children:e.jsxs(T,{className:"sm:max-w-[425px]",children:[e.jsxs(I,{children:[e.jsx(L,{children:"Tambah Varian Valas"}),e.jsx(V,{children:"Masukkan detail mata uang baru yang akan diperdagangkan."})]}),e.jsxs("form",{onSubmit:z,children:[e.jsxs("div",{className:"grid grid-cols-4 py-2 items-center gap-4",children:[e.jsx(S,{htmlFor:"code",className:"text-right",children:"Kode"}),e.jsx(f,{id:"code",placeholder:"Misal: USD",className:"col-span-3 uppercase",value:y.code,onChange:a=>D("code",a.target.value),required:!0})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(S,{htmlFor:"name",className:"text-right",children:"Nama"}),e.jsx(f,{id:"name",placeholder:"Opsional (kosongkan dengan -)",className:"col-span-3",value:y.name,onChange:a=>D("name",a.target.value)})]}),e.jsxs(_,{className:"mt-5",children:[e.jsx(l,{type:"button",variant:"outline",onClick:()=>c(!1),children:"Batal"}),e.jsx(l,{type:"submit",disabled:P,children:"Simpan Valas"})]})]})]})})]})]}),e.jsx(j,{children:e.jsx("div",{className:"rounded-md border",children:e.jsxs(Z,{children:[e.jsx($,{className:"bg-gray-100 dark:bg-zinc-800",children:e.jsxs(b,{children:[e.jsx(r,{className:"w-[100px]",children:"Kode"}),e.jsx(r,{children:"Nama Mata Uang"}),e.jsx(r,{className:"text-right",children:"Jumlah Stok"}),e.jsx(r,{className:"text-right",children:"Rata-rata Modal"}),e.jsx(r,{className:"text-right",children:"Total Nilai"}),e.jsx(r,{className:"text-center w-[120px]",children:"Last Update"}),e.jsx(r,{className:"text-center w-[80px]",children:"Aksi"})]})}),e.jsx(ee,{children:d.length>0?d.map(a=>e.jsxs(b,{className:"hover:bg-gray-50 dark:hover:bg-zinc-900/50",children:[e.jsx(t,{className:"font-bold font-mono text-base",children:a.code.toUpperCase()}),e.jsx(t,{className:"text-muted-foreground",children:a.name}),e.jsx(t,{className:"text-right font-semibold text-base",children:x(a.stock_amount)}),e.jsx(t,{className:"text-right font-medium",children:a.stock_amount>0?x(a.average_rate):"-"}),e.jsx(t,{className:"text-right font-medium text-green-700 dark:text-green-400",children:a.stock_amount>0?w(a.stock_amount*a.average_rate):"-"}),e.jsx(t,{className:"text-center",children:a.stock_amount>0?e.jsx("span",{className:"text-xs text-muted-foreground",children:U(a.updated_at)}):e.jsx("span",{className:"text-[15px] text-red-500 font-bold",children:"Habis"})}),e.jsx(t,{className:"text-center",children:e.jsx(l,{variant:"ghost",size:"icon",className:"text-red-500 hover:text-red-700",onClick:()=>O(a.id),children:e.jsx(re,{className:"h-4 w-4"})})})]},a.id)):e.jsx(b,{children:e.jsx(t,{colSpan:7,className:"h-24 text-center text-muted-foreground",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-2",children:[e.jsx(oe,{className:"h-8 w-8 opacity-20"}),"Tidak ada data stok ditemukan."]})})})})]})})})]})]}),e.jsx(C,{open:F,onOpenChange:i,children:e.jsxs(T,{children:[e.jsxs(I,{children:[e.jsx(L,{children:"Hapus Valas?"}),e.jsx(V,{children:"Apakah Anda yakin ingin menghapus data valas ini? Tindakan ini tidak dapat dibatalkan."})]}),e.jsxs(_,{children:[e.jsx(l,{variant:"outline",onClick:()=>i(!1),children:"Batal"}),e.jsx(l,{variant:"destructive",onClick:B,children:"Hapus"})]})]})})]})}export{ye as default};
